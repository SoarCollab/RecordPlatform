# RecordPlatform ç³»ç»Ÿæ¼”è¿›è§„åˆ’ v7.0

> æ›´æ–°æ—¥æœŸ: 2025-12-12
> èšç„¦ P5 é•¿æœŸæ¶æ„å‡çº§ä¸å‰ç«¯å¼€å‘

---

## ä¸€ã€ç°çŠ¶æ€»ç»“

### 1.1 å·²å®Œæˆäº‹é¡¹ âœ…

| é˜¶æ®µ | å®Œæˆå†…å®¹ |
|------|----------|
| **P0** | encodeCid Bugã€SecureIdAspect å¼‚å¸¸å¤„ç†ã€CORS é€šé…ç¬¦ç¦ç”¨ã€å¤§æ–‡ä»¶ä¸Šä¼ è¶…æ—¶ä¼˜åŒ– |
| **P1** | HTTPS å¼ºåˆ¶é…ç½®ã€åˆ†å¸ƒå¼æµæ§æ”¹é€ ã€MDC/TenantContext å¼‚æ­¥ä¼ é€’ã€å®šæ—¶ä»»åŠ¡åˆ†å¸ƒå¼é”ã€Saga è¡¥å¿åŸå­åŒ– |
| **P2** | SkyWalking Agent å…¨é¢éƒ¨ç½²ã€å¥åº·æ£€æŸ¥æŒ‡æ ‡è¡¥å…¨ã€ç»“æ„åŒ–æ—¥å¿—æ ‡å‡†åŒ– |
| **P3** | å­˜å‚¨è·¯å¾„ç§Ÿæˆ·éš”ç¦»ã€Redis Key ç§Ÿæˆ·éš”ç¦»ã€Dubbo ç§Ÿæˆ·ä¼ æ’­ |
| **P4-2+** | **å¤šé“¾é€‚é…å™¨æ¶æ„**ï¼ˆè¶…è¶ŠåŸè®¡åˆ’ï¼‰ï¼šBlockChainAdapter SPIã€LOCAL_FISCO/BSN_FISCO/BSN_BESU ä¸‰é“¾åˆ‡æ¢ |
| **P4-3** | **åˆçº¦å“åº”è§£æä¼˜åŒ–**ï¼ˆéƒ¨åˆ†ï¼‰ï¼šContractResponseParser æ¶ˆé™¤é­”æ•°ç´¢å¼•ã€ç±»å‹å®‰å…¨å–å€¼ |
| **P4-5** | **æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–**ï¼šV1.1.1 å¤åˆç´¢å¼•ï¼ˆfile/ticket/operation_log è¡¨ï¼‰ |
| **P4-6** | **äº‹ä»¶é©±åŠ¨é€šçŸ¥**ï¼šTicketNotificationEvent + TransactionalEventListener é¿å…äº‹åŠ¡å†… SSE æ­»é” |
| **P4-7** | **å‰ç«¯é¡¹ç›®åˆå§‹åŒ–**ï¼šSvelteKit 5 + Tailwind CSS 4 + OpenAPI TypeScript ç±»å‹ç”Ÿæˆ |
| **P5-2** | **CQRS ä¸è™šæ‹Ÿçº¿ç¨‹**ï¼šVirtual Thread å¯ç”¨ã€FileQueryService è¯»å†™åˆ†ç¦»ã€Caffeine ç¼“å­˜ä¼˜åŒ– |

**ç³»ç»Ÿæ•´ä½“æˆç†Ÿåº¦**ï¼š`8.5/10` - å¤šé“¾æ¶æ„å°±ç»ªï¼Œå‰ç«¯é¡¹ç›®å·²åˆå§‹åŒ–ï¼Œè¿›å…¥åŠŸèƒ½å®Œå–„é˜¶æ®µ

### 1.2 æ ¸å¿ƒæŠ€æœ¯æ ˆ

#### åç«¯
- Java 21 + Spring Boot 3.2.11 + Dubbo 3.3.3 (Triple)
- **å¤šé“¾æ”¯æŒ**ï¼šFISCO BCOS 3.8.0 + Hyperledger Besu (Web3j)
- Solidity ^0.8.11 (Storage.sol, Sharing.sol)
- MinIO 8.5.9 (2å‰¯æœ¬) + Nacos åŠ¨æ€é…ç½®
- MySQL + MyBatis-Plus + Redis + RabbitMQ

#### å‰ç«¯
- SvelteKit 5 + Svelte 5 (Runes)
- Tailwind CSS 4 beta + bits-ui
- OpenAPI TypeScript è‡ªåŠ¨ç±»å‹ç”Ÿæˆ

---

## äºŒã€æ¶æ„å‡çº§æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     æ¶æ„å‡çº§è·¯çº¿å›¾ (P4-P5)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚    P4-2+ âœ…          P4-3 âš ï¸           P5-1              P5-2 âœ…         â”‚
â”‚  å¤šé“¾é€‚é…å™¨         æ™ºèƒ½åˆçº¦ä¼˜åŒ–       APIç‰ˆæœ¬åŒ–         CQRS/è™šæ‹Ÿçº¿ç¨‹   â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ä¸‰é“¾åˆ‡æ¢  â”‚      â”‚äº‹ä»¶indexedâ”‚      â”‚REST v1/v2â”‚      â”‚è¯»å†™åˆ†ç¦»  â”‚       â”‚
â”‚  â”‚BSNé›†æˆ  â”‚      â”‚ç†µæºä¼˜åŒ–  â”‚      â”‚Dubboç‰ˆæœ¬ â”‚      â”‚ç‰©åŒ–è§†å›¾  â”‚       â”‚
â”‚  â”‚å¥åº·æ£€æŸ¥  â”‚      â”‚åˆçº¦æµ‹è¯•  â”‚      â”‚å¥‘çº¦æµ‹è¯•  â”‚      â”‚è™šæ‹Ÿçº¿ç¨‹  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                         â”‚
â”‚    âœ… å®Œæˆ          âš ï¸ ä»…å‰©åˆçº¦æ›´æ–°      10h               âœ… å®Œæˆ        â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚    P5-3              P5-4              P5-5              P5-6           â”‚
â”‚  å‰ç«¯æ ¸å¿ƒåŠŸèƒ½       æ–‡ä»¶é¢„è§ˆ/ä¸‹è½½       å·¥å•ç³»ç»Ÿ          ç›‘æ§ä»ªè¡¨ç›˜     â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ç™»å½•è®¤è¯  â”‚      â”‚æ–‡ä»¶åˆ—è¡¨  â”‚      â”‚å·¥å•åˆ—è¡¨  â”‚      â”‚ç³»ç»ŸæŒ‡æ ‡  â”‚       â”‚
â”‚  â”‚è·¯ç”±å®ˆå«  â”‚      â”‚åŠ å¯†è§£å¯†  â”‚      â”‚å®æ—¶é€šçŸ¥  â”‚      â”‚é“¾çŠ¶æ€    â”‚       â”‚
â”‚  â”‚å¸ƒå±€ç»„ä»¶  â”‚      â”‚é¢„è§ˆ/ä¸‹è½½ â”‚      â”‚SSEé›†æˆ   â”‚      â”‚å‘Šè­¦é…ç½®  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                         â”‚
â”‚      15h               20h               15h               10h          â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸‰ã€P4-2+ å¤šé“¾é€‚é…å™¨æ¶æ„ âœ… å·²å®Œæˆ

### 3.1 æ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     BlockChainAdapter SPI æ¶æ„                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚                    â”‚  BlockChainService   â”‚                             â”‚
â”‚                    â”‚  (Dubbo Provider)    â”‚                             â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                               â”‚                                         â”‚
â”‚                               â–¼                                         â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚                    â”‚  BlockChainAdapter   â”‚  â† SPI æ¥å£                 â”‚
â”‚                    â”‚      (interface)     â”‚                             â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                               â”‚                                         â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚         â”‚                     â”‚                     â”‚                   â”‚
â”‚         â–¼                     â–¼                     â–¼                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚LocalFisco    â”‚    â”‚BsnFisco       â”‚    â”‚BsnBesu        â”‚            â”‚
â”‚  â”‚Adapter       â”‚    â”‚Adapter        â”‚    â”‚Adapter        â”‚            â”‚
â”‚  â”‚(å¼€å‘/æµ‹è¯•)   â”‚    â”‚(BSN FISCO)    â”‚    â”‚(BSN Besu)     â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚         â”‚                     â”‚                     â”‚                   â”‚
â”‚         â–¼                     â–¼                     â–¼                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚FISCO BCOS    â”‚    â”‚BSN FISCO      â”‚    â”‚Hyperledger    â”‚            â”‚
â”‚  â”‚SDK v3        â”‚    â”‚æ‰˜ç®¡èŠ‚ç‚¹       â”‚    â”‚Besu (Web3j)   â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 æ ¸å¿ƒç»„ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `BlockChainAdapter.java` | SPI æ¥å£ï¼Œå®šä¹‰ç»Ÿä¸€çš„é“¾æ“ä½œå¥‘çº¦ |
| `AbstractFiscoAdapter.java` | FISCO BCOS å…¬å…±é€»è¾‘æŠ½è±¡åŸºç±» |
| `LocalFiscoAdapter.java` | æœ¬åœ° FISCO BCOS èŠ‚ç‚¹é€‚é…å™¨ (é»˜è®¤) |
| `BsnFiscoAdapter.java` | BSN æ‰˜ç®¡ FISCO BCOS èŠ‚ç‚¹é€‚é…å™¨ |
| `BsnBesuAdapter.java` | BSN æ‰˜ç®¡ Hyperledger Besu èŠ‚ç‚¹é€‚é…å™¨ |
| `ChainType.java` | é“¾ç±»å‹æšä¸¾ (LOCAL_FISCO, BSN_FISCO, BSN_BESU) |
| `ContractResponseParser.java` | ç±»å‹å®‰å…¨çš„åˆçº¦å“åº”è§£æå™¨ |

### 3.3 é…ç½®ç¤ºä¾‹

```yaml
# application.yml
blockchain:
  active: ${BLOCKCHAIN_ACTIVE:local-fisco}  # é“¾åˆ‡æ¢é…ç½®

  bsn-fisco:
    node-id: ${BSN_NODE_ID:city-node-shanghai}
    peers:
      - ${BSN_FISCO_PEER:bsn-fisco.example.com:20200}
    contracts:
      storage: ${BSN_CONTRACT_STORAGE:}
      sharing: ${BSN_CONTRACT_SHARING:}

  bsn-besu:
    rpc-url: ${BSN_BESU_RPC_URL:}
    chain-id: ${BSN_BESU_CHAIN_ID:}
    wallet:
      private-key: ${BSN_BESU_PRIVATE_KEY:}
    contracts:
      storage: ${BSN_BESU_CONTRACT_STORAGE:}
      sharing: ${BSN_BESU_CONTRACT_SHARING:}
```

---

## å››ã€P4-3 æ™ºèƒ½åˆçº¦ä¼˜åŒ– âš ï¸ å¾…å®Œæˆ

### 4.1 å·²å®Œæˆé¡¹ âœ…

| é¡¹ç›® | è¯´æ˜ |
|------|------|
| **ContractResponseParser** | ç»Ÿä¸€çš„åˆçº¦å“åº”è§£æå™¨ï¼Œæ¶ˆé™¤ç¡¬ç¼–ç ç´¢å¼• |
| **ç±»å‹å®‰å…¨å–å€¼** | `safeGet()`, `safeGetString()`, `validateSize()` ç­‰å·¥å…·æ–¹æ³• |
| **é¢†åŸŸæ¨¡å‹æŠ½è±¡** | `ChainFileDetail`, `ChainReceipt`, `ChainShareInfo` ç­‰ |

### 4.2 å¾…å®Œæˆé¡¹ ğŸ“‹

#### 4.2.1 Storage.sol äº‹ä»¶ç´¢å¼•ä¼˜åŒ–

å½“å‰äº‹ä»¶å®šä¹‰ç¼ºå°‘ `indexed` å…³é”®å­—ï¼Œæ— æ³•é«˜æ•ˆè¿›è¡Œé“¾ä¸‹æŸ¥è¯¢ï¼š

```solidity
// å½“å‰ï¼ˆæ— ç´¢å¼•ï¼‰
event FileStored(string fileName, string uploader, bytes32 fileHash, uint256 uploadTime);

// ä¼˜åŒ–åï¼ˆæ·»åŠ ç´¢å¼•ï¼‰
event FileStored(
    bytes32 indexed fileHash,      // ç´¢å¼•ï¼šæ”¯æŒæŒ‰å“ˆå¸ŒæŸ¥è¯¢
    string indexed uploaderHash,   // ç´¢å¼•ï¼šæ”¯æŒæŒ‰ä¸Šä¼ è€…æŸ¥è¯¢
    string fileName,
    string uploader,
    uint256 timestamp
);
```

#### 4.2.2 Sharing.sol åˆ†äº«ç ç”Ÿæˆä¼˜åŒ–

å½“å‰åˆ†äº«ç ç”Ÿæˆä¾èµ– `block.difficulty`ï¼Œåœ¨ FISCO BCOS ç¯å¢ƒä¸­å¯é¢„æµ‹ï¼š

```solidity
// ä¼˜åŒ–åï¼ˆå¤šç†µæºç»„åˆï¼‰
uint256 randomIndex = uint256(keccak256(abi.encodePacked(
    blockhash(block.number - 1),
    block.timestamp,
    block.coinbase,
    msg.sender,
    tx.gasprice,
    nonce,
    i,
    gasleft()
))) % charsetLength;
```

### 4.3 é¢„ä¼°å·¥æ—¶

| æ­¥éª¤ | ä»»åŠ¡ | å·¥æ—¶ |
|------|------|------|
| 1 | Storage.sol æ·»åŠ  indexed äº‹ä»¶ | 2h |
| 2 | Sharing.sol ä¼˜åŒ–éšæœºæ•°ç”Ÿæˆ | 2h |
| 3 | åˆçº¦å•å…ƒæµ‹è¯• | 2h |
| 4 | éƒ¨ç½²æ›´æ–°åçš„åˆçº¦ | 1h |

---

## äº”ã€P5-1ï¼šAPI ç‰ˆæœ¬åŒ–æ¡†æ¶ï¼ˆé¢„ä¼° 10hï¼‰

### 5.1 REST API ç‰ˆæœ¬åŒ–æ–¹æ¡ˆ

```java
// æ–¹æ¡ˆä¸€ï¼šç»§æ‰¿ç­–ç•¥
@RestController
@RequestMapping("/api/v1/files")
public class FileControllerV1 extends AbstractFileController { }

@RestController
@RequestMapping("/api/v2/files")
public class FileControllerV2 extends AbstractFileController {
    // V2 æ–°å¢ï¼šæ¸¸æ ‡åˆ†é¡µã€æ‰¹é‡æ“ä½œ
}
```

### 5.2 Dubbo æœåŠ¡ç‰ˆæœ¬åŒ–æ–¹æ¡ˆ

```java
@DubboService(version = BlockChainService.VERSION_V1)
public class BlockChainServiceImplV1 implements BlockChainService { }

@DubboService(version = BlockChainService.VERSION_V2)
public class BlockChainServiceImplV2 implements BlockChainService { }
```

### 5.3 å®æ–½æ­¥éª¤

| æ­¥éª¤ | ä»»åŠ¡ | å·¥æ—¶ |
|------|------|------|
| 1 | åˆ›å»º AbstractFileController åŸºç±» | 1h |
| 2 | æ‹†åˆ† V1/V2 Controller | 2h |
| 3 | é…ç½® Swagger ç‰ˆæœ¬åˆ†ç»„ | 1h |
| 4 | Dubbo æ¥å£æ·»åŠ ç‰ˆæœ¬å¸¸é‡ | 1h |
| 5 | å®ç°åŒç‰ˆæœ¬ Dubbo Service | 2h |
| 6 | DTO å­—æ®µè¡¥å…¨ | 1h |
| 7 | ç¼–å†™å¥‘çº¦æµ‹è¯• | 2h |

---

## å…­ã€P5-2ï¼šCQRS ä¸è™šæ‹Ÿçº¿ç¨‹ âœ… å·²å®Œæˆ

### 6.1 å·²å®Œæˆå†…å®¹

#### 6.1.1 Java 21 Virtual Threads å¯ç”¨

```yaml
# application.yml
spring:
  threads:
    virtual:
      enabled: true  # Spring Boot 3.2+ Tomcat è™šæ‹Ÿçº¿ç¨‹
```

#### 6.1.2 AsyncConfiguration å¢å¼º

æ–°å¢ `virtualThreadExecutor` Beanï¼Œç”¨äº I/O å¯†é›†å‹æŸ¥è¯¢æ“ä½œï¼š
- æ¯ä»»åŠ¡åˆ›å»ºè™šæ‹Ÿçº¿ç¨‹ï¼Œæ— éœ€æ± åŒ–
- æ”¯æŒ MDC/TenantContext ä¸Šä¸‹æ–‡ä¼ é€’
- é€‚ç”¨äº CQRS Query æ“ä½œ

ä¿ç•™å¹³å°çº¿ç¨‹æ± ç”¨äº CPU å¯†é›†å‹ä»»åŠ¡ï¼š
- `fileProcessTaskExecutor`ï¼šæ–‡ä»¶åŠ å¯†ã€åŒºå—é“¾å­˜è¯
- `taskExecutor`ï¼šé€šç”¨å¼‚æ­¥ä»»åŠ¡

#### 6.1.3 CQRS è¯»å†™åˆ†ç¦»

**æ–°å¢æ–‡ä»¶**:
- `FileQueryService.java` - Query æœåŠ¡æ¥å£
- `FileQueryServiceImpl.java` - Query æœåŠ¡å®ç°

**Query æ“ä½œï¼ˆ7ä¸ªæ–¹æ³•ï¼‰**:
- `getUserFilesList()` - ç”¨æˆ·æ–‡ä»¶åˆ—è¡¨ï¼ˆå¸¦ç¼“å­˜ï¼‰
- `getUserFilesPage()` - åˆ†é¡µæŸ¥è¯¢
- `getFileAddress()` - æ–‡ä»¶åˆ†ç‰‡åœ°å€
- `getTransactionByHash()` - åŒºå—é“¾äº¤æ˜“ï¼ˆå¸¦ç¼“å­˜ï¼‰
- `getFile()` - æ–‡ä»¶å†…å®¹ä¸‹è½½
- `getShareFile()` - åˆ†äº«æ–‡ä»¶åˆ—è¡¨ï¼ˆå¸¦ç¼“å­˜ï¼‰
- `getFileDecryptInfo()` - è§£å¯†ä¿¡æ¯ï¼ˆå¸¦ç¼“å­˜ï¼‰

**å¼‚æ­¥æ–¹æ³•ï¼ˆVirtual Threadï¼‰**:
- `getUserFilesListAsync()`
- `getFileAddressAsync()`
- `getFileDecryptInfoAsync()`

**Command æ“ä½œä¿ç•™åœ¨ FileService**:
- `storeFile()`, `deleteFile()`, `saveShareFile()` ç­‰

#### 6.1.4 FileController CQRS é‡æ„

```java
// Query Serviceï¼ˆè¯»æ“ä½œï¼‰
@Resource
private FileQueryService fileQueryService;

// Command Serviceï¼ˆå†™æ“ä½œï¼‰
@Resource
private FileService fileService;
```

#### 6.1.5 ç¼“å­˜ç­–ç•¥ä¼˜åŒ–

**CacheConfiguration æ–°å¢ç¼“å­˜åç§°**:
- `userFiles` - ç”¨æˆ·æ–‡ä»¶åˆ—è¡¨
- `fileDecryptInfo` - è§£å¯†ä¿¡æ¯
- `sharedFiles` - åˆ†äº«æ–‡ä»¶
- `transaction` - åŒºå—é“¾äº¤æ˜“

### 6.2 CQRS æ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CQRS æ¶æ„æ¼”è¿›                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   Command Side                    Query Side                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚   â”‚ FileCommand â”‚                â”‚ FileQuery   â”‚                       â”‚
â”‚   â”‚ Service     â”‚                â”‚ Service     â”‚                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚          â”‚                              â”‚                               â”‚
â”‚          â–¼                              â–¼                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚   â”‚ MySQL       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ Redis/ES    â”‚                       â”‚
â”‚   â”‚ (ä¸»åº“)      â”‚   Event/CDC    â”‚ (è¯»ç¼“å­˜)    â”‚                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 Java 21 è™šæ‹Ÿçº¿ç¨‹

```yaml
# application.yml
server:
  tomcat:
    threads:
      virtual: true  # Spring Boot 3.2+ æ”¯æŒ
```

---

## ä¸ƒã€P5-3ï¼šå‰ç«¯æ ¸å¿ƒåŠŸèƒ½ï¼ˆé¢„ä¼° 15hï¼‰

### 7.1 é¡¹ç›®ç»“æ„

```
platform-frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ api/           # API å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ client.ts  # ç»Ÿä¸€è¯·æ±‚å°è£…
â”‚   â”‚   â”‚   â””â”€â”€ types/     # OpenAPI ç”Ÿæˆçš„ç±»å‹
â”‚   â”‚   â”œâ”€â”€ components/    # é€šç”¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ stores/        # Svelte stores
â”‚   â””â”€â”€ routes/
â”‚       â”œâ”€â”€ +layout.svelte
â”‚       â”œâ”€â”€ login/
â”‚       â”œâ”€â”€ files/
â”‚       â””â”€â”€ tickets/
â”œâ”€â”€ package.json
â””â”€â”€ svelte.config.js
```

### 7.2 æŠ€æœ¯é€‰å‹å·²ç¡®å®š

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| SvelteKit | 5.x | å…¨æ ˆæ¡†æ¶ |
| Svelte | 5.x | å“åº”å¼ UIï¼ˆRunes è¯­æ³•ï¼‰ |
| Tailwind CSS | 4.0-beta | åŸå­åŒ– CSS |
| bits-ui | 2.x | æ— æ ·å¼ç»„ä»¶åº“ |
| openapi-typescript | 7.x | API ç±»å‹ç”Ÿæˆ |

### 7.3 å®æ–½æ­¥éª¤

| æ­¥éª¤ | ä»»åŠ¡ | å·¥æ—¶ |
|------|------|------|
| 1 | API å®¢æˆ·ç«¯å°è£…ï¼ˆè®¤è¯ã€æ‹¦æˆªå™¨ã€é”™è¯¯å¤„ç†ï¼‰ | 3h |
| 2 | è®¤è¯æ¨¡å—ï¼ˆç™»å½•é¡µã€JWT å­˜å‚¨ã€è·¯ç”±å®ˆå«ï¼‰ | 4h |
| 3 | å¸ƒå±€ç»„ä»¶ï¼ˆå¯¼èˆªæ ã€ä¾§è¾¹æ ã€å“åº”å¼ï¼‰ | 3h |
| 4 | ä¸»é¢˜åˆ‡æ¢ï¼ˆæš—è‰²æ¨¡å¼ã€mode-watcher é›†æˆï¼‰ | 2h |
| 5 | é”™è¯¯è¾¹ç•Œå’Œ Loading çŠ¶æ€ | 3h |

---

## å…«ã€P5-4ï¼šæ–‡ä»¶é¢„è§ˆ/ä¸‹è½½ï¼ˆé¢„ä¼° 20hï¼‰

### 8.1 åŠŸèƒ½éœ€æ±‚

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| æ–‡ä»¶åˆ—è¡¨ | åˆ†é¡µå±•ç¤ºã€æœç´¢è¿‡æ»¤ã€æ’åº |
| æ–‡ä»¶ä¸Šä¼  | åˆ†ç‰‡ä¸Šä¼ ã€è¿›åº¦æ˜¾ç¤ºã€æ–­ç‚¹ç»­ä¼  |
| æ–‡ä»¶é¢„è§ˆ | å›¾ç‰‡/PDF/æ–‡æœ¬æ–‡ä»¶é¢„è§ˆ |
| æ–‡ä»¶ä¸‹è½½ | å®¢æˆ·ç«¯è§£å¯†ã€å®Œæ•´æ€§æ ¡éªŒ |
| æ–‡ä»¶åˆ†äº« | ç”Ÿæˆåˆ†äº«é“¾æ¥ã€è®¿é—®æ§åˆ¶ |

### 8.2 å®¢æˆ·ç«¯è§£å¯†æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å®¢æˆ·ç«¯è§£å¯†æµç¨‹                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  1. è·å–è§£å¯†ä¿¡æ¯                                                        â”‚
â”‚     GET /api/v1/files/{hash}/decrypt-info                               â”‚
â”‚     è¿”å›: { initialKey, fileName, fileSize, chunkCount }                â”‚
â”‚                                                                         â”‚
â”‚  2. è·å–åˆ†ç‰‡åœ°å€                                                        â”‚
â”‚     GET /api/v1/files/{hash}/addresses                                  â”‚
â”‚     è¿”å›: [ chunkUrl1, chunkUrl2, ... ]                                 â”‚
â”‚                                                                         â”‚
â”‚  3. ä¸‹è½½åˆ†ç‰‡ï¼ˆå¹¶è¡Œï¼‰                                                    â”‚
â”‚     å¹¶è¡Œä¸‹è½½æ‰€æœ‰åˆ†ç‰‡åˆ°å†…å­˜/IndexedDB                                     â”‚
â”‚                                                                         â”‚
â”‚  4. Web Crypto è§£å¯†                                                     â”‚
â”‚     ä½¿ç”¨ initialKey å’Œ AES-GCM è§£å¯†æ¯ä¸ªåˆ†ç‰‡                              â”‚
â”‚                                                                         â”‚
â”‚  5. åˆå¹¶åˆ†ç‰‡                                                            â”‚
â”‚     æŒ‰é¡ºåºåˆå¹¶è§£å¯†åçš„åˆ†ç‰‡                                               â”‚
â”‚                                                                         â”‚
â”‚  6. è§¦å‘ä¸‹è½½                                                            â”‚
â”‚     åˆ›å»º Blob URLï¼Œè§¦å‘æµè§ˆå™¨ä¸‹è½½                                        â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¹ã€æŠ€æœ¯å€ºåŠ¡æ¸…å•

| å€ºåŠ¡é¡¹ | ä¸¥é‡åº¦ | ä½ç½® | çŠ¶æ€ | å»ºè®® |
|--------|--------|------|------|------|
| æµ‹è¯•è¦†ç›–ç‡ <10% | ğŸ”´ é«˜ | å…¨éƒ¨æ¨¡å— | ğŸ“‹ å¾…å¤„ç† | è¡¥å……æ ¸å¿ƒè·¯å¾„å•æµ‹ |
| äº‹ä»¶æœª indexed | ğŸŸ¡ ä¸­ | Storage.sol/Sharing.sol | ğŸ“‹ P4-3 å¾…å®Œæˆ | æ™ºèƒ½åˆçº¦æ›´æ–° |
| åˆ†äº«ç ç”Ÿæˆä¾èµ–å¯é¢„æµ‹ç†µæº | ğŸŸ¡ ä¸­ | Sharing.sol | ğŸ“‹ P4-3 å¾…å®Œæˆ | æ™ºèƒ½åˆçº¦æ›´æ–° |
| ~~è¿”å›å€¼é­”æ•°ç´¢å¼•~~ | ~~ğŸŸ¡ ä¸­~~ | ~~BlockChainServiceImpl~~ | âœ… å·²è§£å†³ | ContractResponseParser |
| ~~æ•°æ®åº“å¤åˆç´¢å¼•ç¼ºå¤±~~ | ~~ğŸŸ¡ ä¸­~~ | ~~file/ticket è¡¨~~ | âœ… V1.1.1 å·²ä¿®å¤ | å¤åˆç´¢å¼•è¿ç§» |
| æ—¥å¿—è¯­è¨€æ··ç”¨ | ğŸŸ¢ ä½ | å…¨éƒ¨ | ğŸ“‹ å¾…å¤„ç† | ç»Ÿä¸€ä¸­æ–‡ |
| ResultEnum ç¼–ç æ··ä¹± | ğŸŸ¢ ä½ | api/constant | ğŸ“‹ å¾…å¤„ç† | é‡æ–°è§„åˆ’åˆ†æ®µ |
| Caffeine æ— é¢„çƒ­ | ğŸŸ¢ ä½ | backend-web | ğŸ“‹ å¾…å¤„ç† | å¯åŠ¨æ—¶é¢„çƒ­ |
| OkHttpClient æœªå…³é—­ | ğŸŸ¢ ä½ | MinioMonitor | ğŸ“‹ å¾…å¤„ç† | PreDestroy æ¸…ç† |

---

## åã€è¡ŒåŠ¨é¡¹æ±‡æ€»

| ä¼˜å…ˆçº§ | ä»»åŠ¡ | é¢„ä¼°å·¥æ—¶ | ä¾èµ– | çŠ¶æ€ |
|--------|------|----------|------|------|
| **P4-2+** | å¤šé“¾é€‚é…å™¨æ¶æ„ | - | æ—  | âœ… å®Œæˆ |
| **P4-3** | æ™ºèƒ½åˆçº¦ä¼˜åŒ–ï¼ˆå‰©ä½™ï¼šäº‹ä»¶ç´¢å¼•+ç†µæºï¼‰ | 7h | æ—  | âš ï¸ éƒ¨åˆ†å®Œæˆ |
| **P5-1** | API ç‰ˆæœ¬åŒ–æ¡†æ¶ | 10h | æ—  | ğŸ“‹ å¾…å¼€å§‹ |
| **P5-2** | CQRS/è™šæ‹Ÿçº¿ç¨‹ | 15h | æ—  | âœ… å®Œæˆ |
| **P5-3** | å‰ç«¯æ ¸å¿ƒåŠŸèƒ½ | 15h | æ—  | ğŸ“‹ å¾…å¼€å§‹ |
| **P5-4** | æ–‡ä»¶é¢„è§ˆ/ä¸‹è½½ | 20h | P5-3 | ğŸ“‹ å¾…å¼€å§‹ |
| **P5-5** | å·¥å•ç³»ç»Ÿå‰ç«¯ | 15h | P5-3 | ğŸ“‹ å¾…å¼€å§‹ |
| **P5-6** | ç›‘æ§ä»ªè¡¨ç›˜ | 10h | P5-3 | ğŸ“‹ å¾…å¼€å§‹ |

**å»ºè®®å®æ–½é¡ºåº**ï¼šP4-3 â†’ P5-3 â†’ P5-4 â†’ P5-1 â†’ P5-5 â†’ P5-2 â†’ P5-6

- P5-3ï¼ˆå‰ç«¯æ ¸å¿ƒåŠŸèƒ½ï¼‰åº”ä¼˜å…ˆï¼Œæ˜¯å…¶ä»–å‰ç«¯åŠŸèƒ½çš„åŸºç¡€
- P4-3ï¼ˆæ™ºèƒ½åˆçº¦ï¼‰å¯ä¸å‰ç«¯å¼€å‘å¹¶è¡Œ
- P5-1/P5-2 ä¼˜å…ˆçº§è¾ƒä½ï¼Œå¯å»¶åå®æ–½

---

## åä¸€ã€å…³é”®æ–‡ä»¶ç´¢å¼•

### åŒºå—é“¾é€‚é…å™¨

| åŠŸèƒ½ | æ–‡ä»¶è·¯å¾„ |
|------|---------|
| **SPI æ¥å£** | `platform-fisco/.../adapter/BlockChainAdapter.java` |
| **FISCO åŸºç±»** | `platform-fisco/.../adapter/impl/AbstractFiscoAdapter.java` |
| **æœ¬åœ°é€‚é…å™¨** | `platform-fisco/.../adapter/impl/LocalFiscoAdapter.java` |
| **BSN FISCO** | `platform-fisco/.../adapter/impl/BsnFiscoAdapter.java` |
| **BSN Besu** | `platform-fisco/.../adapter/impl/BsnBesuAdapter.java` |
| **å“åº”è§£æå™¨** | `platform-fisco/.../parser/ContractResponseParser.java` |
| **é“¾ç±»å‹æšä¸¾** | `platform-fisco/.../adapter/model/ChainType.java` |
| **é“¾é…ç½®** | `platform-fisco/src/main/resources/application.yml` |

### åç«¯æœåŠ¡

| åŠŸèƒ½ | æ–‡ä»¶è·¯å¾„ |
|------|---------|
| **åŒºå—é“¾æœåŠ¡** | `platform-fisco/.../service/BlockChainServiceImpl.java` |
| **æ–‡ä»¶æœåŠ¡** | `platform-backend/.../service/impl/FileServiceImpl.java` |
| **Saga ç¼–æ’** | `platform-backend/.../service/saga/FileSagaOrchestrator.java` |
| **äº‹ä»¶ç›‘å¬** | `platform-backend/.../listener/TicketEventListener.java` |
| **æ•°æ®åº“è¿ç§»** | `platform-backend/.../db/migration/V1.1.1__add_composite_indexes.sql` |

### å‰ç«¯é¡¹ç›®

| åŠŸèƒ½ | æ–‡ä»¶è·¯å¾„ |
|------|---------|
| **é¡¹ç›®é…ç½®** | `platform-frontend/package.json` |
| **Svelte é…ç½®** | `platform-frontend/svelte.config.js` |
| **Vite é…ç½®** | `platform-frontend/vite.config.ts` |
| **æºä»£ç ** | `platform-frontend/src/` |

---

## åäºŒã€æ€»ç»“

### é‡å¤§é‡Œç¨‹ç¢‘ ğŸ‰

1. **å¤šé“¾æ¶æ„å°±ç»ª**ï¼šè¶…è¶ŠåŸè®¡åˆ’å®ç°ä¸‰é“¾åˆ‡æ¢èƒ½åŠ›ï¼ˆLOCAL_FISCO/BSN_FISCO/BSN_BESUï¼‰
2. **å‰ç«¯é¡¹ç›®å¯åŠ¨**ï¼šSvelteKit 5 + Tailwind CSS 4 æŠ€æœ¯æ ˆç¡®å®š
3. **å“åº”è§£æé‡æ„**ï¼šContractResponseParser æ¶ˆé™¤é­”æ•°ï¼Œæå‡ä»£ç å¥å£®æ€§
4. **æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–**ï¼šV1.1.1 å¤åˆç´¢å¼•è¦†ç›–æ ¸å¿ƒæŸ¥è¯¢åœºæ™¯

### ä¸‹ä¸€é˜¶æ®µé‡ç‚¹

- **å‰ç«¯å¼€å‘**ï¼šå®Œæˆæ ¸å¿ƒåŠŸèƒ½ï¼ˆè®¤è¯ã€æ–‡ä»¶ç®¡ç†ã€å·¥å•ç³»ç»Ÿï¼‰
- **æ™ºèƒ½åˆçº¦**ï¼šå®Œæˆå‰©ä½™ä¼˜åŒ–ï¼ˆäº‹ä»¶ç´¢å¼•ã€ç†µæºå®‰å…¨ï¼‰
- **API ç¨³å®šåŒ–**ï¼šç‰ˆæœ¬åŒ–æ¡†æ¶å»ºè®¾ï¼Œä¸ºé•¿æœŸç»´æŠ¤åšå‡†å¤‡

**æ€»é¢„ä¼°å‰©ä½™å·¥æ—¶**ï¼š~92hï¼ˆå«å‰ç«¯å¼€å‘ 60hï¼‰

é¡¹ç›®æ¶æ„è®¾è®¡æˆç†Ÿï¼Œå¤šé“¾æ”¯æŒä½¿ç³»ç»Ÿå…·å¤‡æ›´é«˜çš„çµæ´»æ€§å’Œå®¹ç¾èƒ½åŠ›ã€‚P4 é˜¶æ®µæ ¸å¿ƒç›®æ ‡å·²è¶…é¢å®Œæˆï¼ŒP5 é˜¶æ®µèšç„¦å‰ç«¯ç”¨æˆ·ä½“éªŒå’Œç³»ç»Ÿç¨³å®šæ€§ã€‚
